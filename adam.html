<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ádám bankja</title>
  <link rel="icon" href="icon.png">
    <link rel="icon" href="logo.png" type="image/png" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #7097E6;
      text-align: center;
      padding: 40px;
    }
    .card {
      background: white;
      display: inline-block;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      max-width: 400px;
    }
    input, select {
      padding: 10px;
      margin: 10px;
      width: 80%;
    }
    .button {
      padding: 10px 20px;
      background-color: #7097E6;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .button:hover {
      background-color: #357ae8;
    }
    .error {
      color: red;
      font-weight: bold;
    }
    .success {
      color: green;
      font-weight: bold;
    }
    .logo {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 150px;
      height: 150px;
    }
    .coupon-btn {
      margin-left: 10px;
      background-color: #4CAF50;
      padding: 5px 10px;
      font-size: 0.9em;
    }
    .coupon-btn:hover {
      background-color: #388E3C;
    }
	/* Mobilbarát alap stílusok */

body {
  margin: 0;
  padding: 20px;
  font-family: Arial, sans-serif;
  background: #7097E6;
  text-align: center;
}

.card {
  max-width: 400px;
  margin: auto;
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
}

input, select, button {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  margin: 10px 0;
  padding: 12px;
  font-size: 1em;
  border-radius: 5px;
  border: 1px solid #ccc;
}

button {
  background-color: #7097E6;
  color: white;
  border: none;
  cursor: pointer;
}

button:hover {
  background-color: #357ae8;
}

/* Kis képernyőn nagyobb padding, stb. */
@media (max-width: 480px) {
  body {
    padding: 10px;
  }
  .card {
    padding: 15px;
  }
}
.epass-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  padding: 20px;
}

.epass-card {
  background: white;
  border-radius: 16px;
  padding: 20px;
  width: 280px;
  box-shadow: 0 0 15px rgba(0,0,0,0.1);
  text-align: center;
  transition: transform 0.3s ease;
}

.epass-card:hover {
  transform: scale(1.03);
}

.epass-image {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 10px;
}

.epass-name {
  font-size: 18px;
  font-weight: bold;
  color: #333;
}
.site-footer {
  position: fixed;
  bottom: 0;
  width: 100%;
  background-color: #7097E6;
  color: white;
  text-align: center;
  padding: 6px 0;
  font-size: 13px;
  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.1);
  z-index: 10;
}

.site-footer a {
  color: white;
  text-decoration: underline;
}

.site-footer a:hover {
  text-decoration: none;
}
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
</head>
<body>
  <img src="logo.png" alt="Logo" class="logo">
  <div class="card">
    <h1>Üdvözlünk, Ádám!</h1>
    <p>Egyenleged: <strong id="balance">0 Ft</strong></p>

    <h3>Utalás</h3>
    <select id="receiver">
      <option value="" disabled selected>Válassz címzettet</option>
      <option value="Máté">Máté</option>
      <option value="Barni">Barni</option>
      <option value="Dani">Dani</option>
      <option value="Kamilla">Kamilla</option>
      <option value="Mama">Mama</option>
    </select><br />
    <input type="number" id="amount" placeholder="Összeg Ft-ban" /><br />
    <button class="button" onclick="transfer()">Utalás</button>

    <p id="message"></p>

    <hr />

    <h3>Kupon beváltása</h3>
    <input type="text" id="couponCode" placeholder="Írd be a kuponkódot" />
    <button class="button" onclick="activateCoupon()">Beváltás</button>
    <p id="couponMessage"></p>

    <h3>Aktív kuponok:</h3>
    <ul id="activeCouponsList" style="list-style:none; padding-left:0;"></ul>

    <br /><br />

	<hr style="margin: 40px 0; border: none; border-top: 2px solid #d0d0d0;">

<h2 style="text-align: center; color: #333;">Digitális E-Pass kártya</h2>

<div class="epass-container">
  <div class="epass-card">
    <img src="Ádám.png" alt="Ádám E-Pass" class="epass-image">
    <p class="epass-name">Ádám</p>
  </div>
    <button class="button" onclick="location.href='login.html'">Kijelentkezés</button>
  <!-- Add more epass-cards for other users (Barni, Dani, etc.) -->
</div>

  </div>

  <script>
    const firebaseConfig = {

  apiKey: "AIzaSyD9VC5qOYt97Rt-3EMmJzBFzuIdrJas0lA",

  authDomain: "jatekbank-89289.firebaseapp.com",

  databaseURL: "https://jatekbank-89289-default-rtdb.firebaseio.com",

  projectId: "jatekbank-89289",

  storageBucket: "jatekbank-89289.firebasestorage.app",

  messagingSenderId: "77741361269",

  appId: "1:77741361269:web:e1226bc616d9e845d9903c",

  measurementId: "G-B76FVR2187"

};
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const currentUser = "Ádám";
    const users = ["Máté", "Dani", "Barni", "Ádám", "Kamilla", "Mama"];
    const coupons = {
      "1000KEKSZ": "-1000 keksz",
      "FILMV": "Filmválasztás",
      "JATEK": "Te választod a játékot",
      "HOLALSZ": "Hol alszol",
      "KIVELALSZ": "Kivel alszol",
      "EBED": "Ebédválasztás",
      "JATSZOTER": "Játszótér"
    };

    function updateBalanceDisplay() {
      db.ref("balances/" + currentUser).on("value", snap => {
        const value = snap.val();
        document.getElementById("balance").textContent = value.toLocaleString() + " Ft";
      });
    }

    function transfer() {
      const receiver = document.getElementById("receiver").value;
      const amount = parseInt(document.getElementById("amount").value);
      const message = document.getElementById("message");

      if (!receiver || isNaN(amount) || amount <= 0 || receiver === currentUser) {
        message.textContent = "Adj meg érvényes adatokat!";
        message.className = "error";
        return;
      }

      db.ref("balances").once("value").then(snapshot => {
        const data = snapshot.val();
        if (data[currentUser] < amount) {
          message.textContent = "Nincs elég egyenleg!";
          message.className = "error";
          return;
        }
        db.ref("balances/" + currentUser).set(data[currentUser] - amount);
        db.ref("balances/" + receiver).set(data[receiver] + amount);
        message.textContent = `Sikeres utalás: ${amount} Ft ${receiver} részére.`;
        message.className = "success";
        document.getElementById("amount").value = "";
        document.getElementById("receiver").selectedIndex = 0;
      });
    }

    function resetBalances() {
      users.forEach(user => {
        db.ref("balances/" + user).set(5000);
      });
    }

    function activateCoupon() {
      const code = document.getElementById("couponCode").value.trim().toUpperCase();
      const msg = document.getElementById("couponMessage");
      if (!code || !(code in coupons)) {
        msg.textContent = "Érvénytelen kuponkód!";
        msg.className = "error";
        return;
      }

      db.ref("coupons/" + currentUser + "/" + code).once("value", snap => {
        if (snap.exists()) {
          msg.textContent = "Már aktiváltad ezt a kupont!";
          msg.className = "error";
        } else {
          db.ref("coupons/" + currentUser + "/" + code).set(true);
          msg.textContent = `Kupon aktiválva: ${coupons[code]}`;
          msg.className = "success";
          showActiveCoupons();
        }
      });
    }

    function showActiveCoupons() {
      const listEl = document.getElementById("activeCouponsList");
      listEl.innerHTML = "";
      db.ref("coupons/" + currentUser).once("value", snap => {
        const data = snap.val();
        if (!data) {
          listEl.innerHTML = "<li>Nincsenek aktív kuponjaid.</li>";
          return;
        }
        for (const code in data) {
          const li = document.createElement("li");
          li.textContent = coupons[code] || code;
          const btn = document.createElement("button");
          btn.textContent = "Felhasználom";
          btn.className = "coupon-btn";
          btn.onclick = () => useCoupon(code);
          li.appendChild(btn);
          listEl.appendChild(li);
        }
      });
    }

    function useCoupon(code) {
      db.ref("coupons/" + currentUser + "/" + code).remove();
      if (code === "1000KEKSZ") {
        db.ref("balances/" + currentUser).once("value", snap => {
          const bal = Math.max(0, snap.val() - 1000);
          db.ref("balances/" + currentUser).set(bal);
        });
      }
      document.getElementById("couponMessage").textContent = `Felhasználtad: ${coupons[code]}`;
      document.getElementById("couponMessage").className = "success";
      showActiveCoupons();
    }

    updateBalanceDisplay();
    showActiveCoupons();
  </script>
  <footer class="site-footer">
  <p>© 2025 Mama Technologies • Szponzorunk: <a href="https://sites.google.com/view/parkliga" target="_blank">Parkliga</a></p>
</footer>
</body>
</html>
